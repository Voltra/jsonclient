{"version":3,"sources":["../build-tsc/jsonclient.js"],"names":["Object","defineProperty","exports","value","Cache_1","require","Credentials_1","Mode_1","Redirect_1","Referrer_1","fetchJSON","$json","path","functor","url","data","options","payload","method","body","JSON","stringify","headers","finalPayload","assign","promise","Promise","resolve","reject","f","fetch","then","contentType","response","get","includes","json","cache","credentials","mode","redirect","referrer","__post_options","__post_data","__post_allArgs","optionsObj","postOptions","Cache","Credentials","Mode","Redirect","Referrer","default"],"mappings":"AAAA;;;;;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAMC,UAAUC,QAAQ,eAAR,CAAhB;AACA,IAAMC,gBAAgBD,QAAQ,qBAAR,CAAtB;AACA,IAAME,SAASF,QAAQ,cAAR,CAAf;AACA,IAAMG,aAAaH,QAAQ,kBAAR,CAAnB;AACA,IAAMI,aAAaJ,QAAQ,kBAAR,CAAnB;AACA,IAAMK,YAAYL,QAAQ,YAAR,CAAlB;;IACMM,K;;;;;;;4BACSC,I,EAAMC,O,EAAS;AACtB,mBAAOH,UAAUE,IAAV,EAAgBC,OAAhB,CAAP;AACH;;;uCACqBC,G,EAAKC,I,EAAMC,O,EAAS;AACtC,mBAAOA,QAAQ,MAAR,CAAP;AACA,mBAAOA,QAAQ,SAAR,CAAP;AACA,mBAAOA,QAAQ,QAAR,CAAP;AACA,gBAAMC,UAAU;AACZC,wBAAQ,MADI;AAEZC,sBAAMC,KAAKC,SAAL,CAAeN,IAAf,CAFM;AAGZO,yBAAS;AACL,oCAAgB;AADX;AAHG,aAAhB;AAOA,gBAAMC,eAAevB,OAAOwB,MAAP,CAAc,EAAd,EAAkBP,OAAlB,EAA2BD,OAA3B,CAArB;AACA,gBAAMS,UAAU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7C,oBAAMC,IAAIC,MAAMhB,GAAN,EAAWS,YAAX,CAAV;AACAM,kBAAEE,IAAF,CAAO,oBAAY;AACf,wBAAIC,cAAcC,SAASX,OAAT,CAAiBY,GAAjB,CAAqB,cAArB,CAAlB;AACA,wBAAIF,eAAeA,YAAYG,QAAZ,CAAqB,kBAArB,CAAnB,EACI,OAAOF,SAASG,IAAT,GAAgBL,IAAhB,CAAqBJ,OAArB,CAAP,CADJ,KAEK;AACDC,+BAAO,uFAAP;AACA,+BAAO,IAAP;AACH;AACJ,iBARD;AASA,uBAAOC,CAAP;AACH,aAZe,CAAhB;AAaA,mBAAOJ,OAAP;AACH;;;uCACqBX,G,EAAKC,I,EAAMsB,K,EAAOC,W,EAAaC,I,EAAMC,Q,EAAUC,Q,EAAU;AAC3E,gBAAMxB,UAAU;AACZoB,4BADY;AAEZC,wCAFY;AAGZC,0BAHY;AAIZC,kCAJY;AAKZC;AALY,aAAhB;AAOA,mBAAO9B,MAAM+B,cAAN,CAAqB5B,GAArB,EAA0BC,IAA1B,EAAgCE,OAAhC,CAAP;AACH;;;oCACkBH,G,EAAKC,I,EAAM;AAC1B,mBAAOJ,MAAM+B,cAAN,CAAqB5B,GAArB,EAA0BC,IAA1B,EAAgC,EAAhC,CAAP;AACH;;;6BACWD,G,EAAKC,I,EAAkB;AAC/B,gBAAI,uDAAmB,CAAvB,EACI,OAAOJ,MAAMgC,WAAN,CAAkB7B,GAAlB,EAAuBC,IAAvB,CAAP;AACJ,gBAAI,uDAAmB,CAAvB,EAA0B;AACtB,oBAAMsB,wDAAN;AACA,oBAAMC,8DAAN;AACA,oBAAMC,uDAAN;AACA,oBAAMC,2DAAN;AACA,oBAAMC,2DAAN;AACA,uBAAO9B,MAAMiC,cAAN,CAAqB9B,GAArB,EAA0BC,IAA1B,EAAgCsB,KAAhC,EAAuCC,WAAvC,EAAoDC,IAApD,EAA0DC,QAA1D,EAAoEC,QAApE,CAAP;AACH;AACD,gBAAI,uDAAmB,CAAvB,EAA0B;AACtB,oBAAMI,6DAAN;AACA,uBAAOlC,MAAM+B,cAAN,CAAqB5B,GAArB,EAA0BC,IAA1B,EAAgC8B,UAAhC,CAAP;AACH;AACD,mBAAO,IAAP;AACH;;;;;;AAELlC,MAAMmC,WAAN,GAAoB,EAAEC,OAAO3C,QAAQ2C,KAAjB,EAAwBC,aAAa1C,cAAc0C,WAAnD,EAAgEC,MAAM1C,OAAO0C,IAA7E,EAAmFC,UAAU1C,WAAW0C,QAAxG,EAAkHC,UAAU1C,WAAW0C,QAAvI,EAApB;AACAjD,QAAQkD,OAAR,GAAkBzC,KAAlB;AACA;AACA","file":"jsonclient.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Cache_1 = require(\"./enums/Cache\");\r\nconst Credentials_1 = require(\"./enums/Credentials\");\r\nconst Mode_1 = require(\"./enums/Mode\");\r\nconst Redirect_1 = require(\"./enums/Redirect\");\r\nconst Referrer_1 = require(\"./enums/Referrer\");\r\nconst fetchJSON = require(\"fetch_json\");\r\nclass $json {\r\n    static get(path, functor) {\r\n        return fetchJSON(path, functor);\r\n    }\r\n    static __post_options(url, data, options) {\r\n        delete options[\"body\"];\r\n        delete options[\"headers\"];\r\n        delete options[\"method\"];\r\n        const payload = {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n                \"content-type\": \"application/json\"\r\n            }\r\n        };\r\n        const finalPayload = Object.assign({}, payload, options);\r\n        const promise = new Promise((resolve, reject) => {\r\n            const f = fetch(url, finalPayload);\r\n            f.then(response => {\r\n                var contentType = response.headers.get(\"content-type\");\r\n                if (contentType && contentType.includes(\"application/json\"))\r\n                    return response.json().then(resolve);\r\n                else {\r\n                    reject(\"Something went wrong during data inspection (data is not JSON or couldn't reach file)\");\r\n                    return null;\r\n                }\r\n            });\r\n            return f;\r\n        });\r\n        return promise;\r\n    }\r\n    static __post_allArgs(url, data, cache, credentials, mode, redirect, referrer) {\r\n        const payload = {\r\n            cache,\r\n            credentials,\r\n            mode,\r\n            redirect,\r\n            referrer\r\n        };\r\n        return $json.__post_options(url, data, payload);\r\n    }\r\n    static __post_data(url, data) {\r\n        return $json.__post_options(url, data, {});\r\n    }\r\n    static post(url, data, ...options) {\r\n        if (options.length === 0)\r\n            return $json.__post_data(url, data);\r\n        if (options.length === 5) {\r\n            const cache = options[0];\r\n            const credentials = options[1];\r\n            const mode = options[2];\r\n            const redirect = options[3];\r\n            const referrer = options[4];\r\n            return $json.__post_allArgs(url, data, cache, credentials, mode, redirect, referrer);\r\n        }\r\n        if (options.length === 1) {\r\n            const optionsObj = options[0];\r\n            return $json.__post_options(url, data, optionsObj);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n$json.postOptions = { Cache: Cache_1.Cache, Credentials: Credentials_1.Credentials, Mode: Mode_1.Mode, Redirect: Redirect_1.Redirect, Referrer: Referrer_1.Referrer };\r\nexports.default = $json;\r\n;\r\n//# sourceMappingURL=jsonclient.js.map"]}